{"ast":null,"code":"var _jsxFileName = \"/Users/alvinlong/Desktop/Fall_2024/ENSF_480/480-Final-Project/Final-Project-Demo/frontend/src/component/SeatMapPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SeatMapPage({\n  movieId,\n  onProceedToPurchase\n}) {\n  _s();\n  const [seatmap, setSeatmap] = useState([]); // Array to store seatmap data\n  const [selectedSeats, setSelectedSeats] = useState([]); // Array to store selected seats\n  const [error, setError] = useState(null); // State to handle error messages\n\n  // Fetch seatmap on movieId change\n  useEffect(() => {\n    const get_seatmap_for_movie = async movieId => {\n      try {\n        const response = await fetch(`/api/seatmap/${movieId}`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        return await response.json();\n      } catch (error) {\n        console.error('Error fetching seatmap:', error);\n        throw error; // Handle the error as needed\n      }\n    };\n    const fetchSeatmap = async () => {\n      try {\n        const response = await fetch(`http://127.0.0.1:5000/movies/${movieId}/seatmap`);\n        if (response.ok) {\n          const data = await response.json();\n          setSeatmap(data.rows); // Access the 'rows' key from backend response\n          setError(null); // Reset error state if fetch is successful\n        } else {\n          console.error('Failed to fetch seatmap:', response.status);\n          setError('Failed to load seatmap. Please try again.');\n        }\n      } catch (error) {\n        console.error('Error fetching seatmap:', error);\n        setError('Error fetching seatmap. Please check your connection.');\n      }\n    };\n    fetchSeatmap();\n  }, [movieId]); // Re-run this effect when movieId changes  \n\n  // Function to handle seat selection (toggle between selected/deselected)\n  const handleSeatClick = (row, seatNumber) => {\n    const seatKey = `${row}${seatNumber}`; // Unique identifier for seat\n    setSelectedSeats(prev => prev.includes(seatKey) ? prev.filter(key => key !== seatKey) : [...prev, seatKey]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Seatmap for Movie ID: \", movieId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red',\n        marginBottom: '10px'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seatmap\",\n      children: seatmap.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading seatmap...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this) : seatmap.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seat-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"row-label\",\n          children: [row.row, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this), row.seats.map((seat, seatIndex) => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleSeatClick(row.row, seat.number),\n          style: {\n            backgroundColor: selectedSeats.includes(`${row.row}${seat.number}`) ? 'green' // Selected seat\n            : seat.available ? 'gray' // Available seat\n            : 'red',\n            // Unavailable seat\n            margin: '5px',\n            padding: '10px',\n            cursor: seat.available ? 'pointer' : 'not-allowed' // Disable cursor for unavailable seats\n          },\n          disabled: !seat.available // Disable the button if the seat is unavailable\n          ,\n          children: seat.number\n        }, seatIndex, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }, this))]\n      }, rowIndex, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onProceedToPurchase,\n      disabled: selectedSeats.length === 0 // Disable button if no seat is selected\n      ,\n      style: {\n        marginTop: '20px',\n        padding: '10px 20px',\n        backgroundColor: selectedSeats.length > 0 ? 'blue' : 'lightgray',\n        color: 'white',\n        cursor: selectedSeats.length > 0 ? 'pointer' : 'not-allowed'\n      },\n      children: \"Proceed to Purchase\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(SeatMapPage, \"6icQz+sqWSVTYBPMUqfWCcm/Lpg=\");\n_c = SeatMapPage;\nexport default SeatMapPage;\nvar _c;\n$RefreshReg$(_c, \"SeatMapPage\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","SeatMapPage","movieId","onProceedToPurchase","_s","seatmap","setSeatmap","selectedSeats","setSelectedSeats","error","setError","get_seatmap_for_movie","response","fetch","ok","Error","status","json","console","fetchSeatmap","data","rows","handleSeatClick","row","seatNumber","seatKey","prev","includes","filter","key","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","marginBottom","className","length","map","rowIndex","seats","seat","seatIndex","onClick","number","backgroundColor","available","margin","padding","cursor","disabled","marginTop","_c","$RefreshReg$"],"sources":["/Users/alvinlong/Desktop/Fall_2024/ENSF_480/480-Final-Project/Final-Project-Demo/frontend/src/component/SeatMapPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nfunction SeatMapPage({ movieId, onProceedToPurchase }) {\n  const [seatmap, setSeatmap] = useState([]); // Array to store seatmap data\n  const [selectedSeats, setSelectedSeats] = useState([]); // Array to store selected seats\n  const [error, setError] = useState(null); // State to handle error messages\n\n  // Fetch seatmap on movieId change\n  useEffect(() => {\n    const get_seatmap_for_movie = async (movieId) => {\n      try {\n        const response = await fetch(`/api/seatmap/${movieId}`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        return await response.json();\n      } catch (error) {\n        console.error('Error fetching seatmap:', error);\n        throw error; // Handle the error as needed\n      }\n    };\n    \n\n    const fetchSeatmap = async () => {\n      try {\n        const response = await fetch(`http://127.0.0.1:5000/movies/${movieId}/seatmap`);\n        if (response.ok) {\n          const data = await response.json();\n          setSeatmap(data.rows); // Access the 'rows' key from backend response\n          setError(null); // Reset error state if fetch is successful\n        } else {\n          console.error('Failed to fetch seatmap:', response.status);\n          setError('Failed to load seatmap. Please try again.');\n        }\n      } catch (error) {\n        console.error('Error fetching seatmap:', error);\n        setError('Error fetching seatmap. Please check your connection.');\n      }\n    };\n    fetchSeatmap();\n  }, [movieId]); // Re-run this effect when movieId changes  \n\n  // Function to handle seat selection (toggle between selected/deselected)\n  const handleSeatClick = (row, seatNumber) => {\n    const seatKey = `${row}${seatNumber}`; // Unique identifier for seat\n    setSelectedSeats((prev) =>\n      prev.includes(seatKey) ? prev.filter((key) => key !== seatKey) : [...prev, seatKey]\n    );\n  };\n\n  return (\n    <div>\n      <h1>Seatmap for Movie ID: {movieId}</h1>\n      \n      {/* Display error if fetching fails */}\n      {error && <div style={{ color: 'red', marginBottom: '10px' }}>{error}</div>}\n      \n      <div className=\"seatmap\">\n        {seatmap.length === 0 ? (\n          <p>Loading seatmap...</p>\n        ) : (\n          seatmap.map((row, rowIndex) => (\n            <div key={rowIndex} className=\"seat-row\">\n              <span className=\"row-label\">{row.row}:</span>\n              {row.seats.map((seat, seatIndex) => (\n                <button\n                  key={seatIndex}\n                  onClick={() => handleSeatClick(row.row, seat.number)}\n                  style={{\n                    backgroundColor: selectedSeats.includes(`${row.row}${seat.number}`)\n                      ? 'green'  // Selected seat\n                      : seat.available\n                      ? 'gray'  // Available seat\n                      : 'red',  // Unavailable seat\n                    margin: '5px',\n                    padding: '10px',\n                    cursor: seat.available ? 'pointer' : 'not-allowed',  // Disable cursor for unavailable seats\n                  }}\n                  disabled={!seat.available}  // Disable the button if the seat is unavailable\n                >\n                  {seat.number}\n                </button>\n              ))}\n            </div>\n          ))\n        )}\n      </div>\n\n      <button\n        onClick={onProceedToPurchase}\n        disabled={selectedSeats.length === 0}  // Disable button if no seat is selected\n        style={{\n          marginTop: '20px',\n          padding: '10px 20px',\n          backgroundColor: selectedSeats.length > 0 ? 'blue' : 'lightgray',\n          color: 'white',\n          cursor: selectedSeats.length > 0 ? 'pointer' : 'not-allowed',\n        }}\n      >\n        Proceed to Purchase\n      </button>\n    </div>\n  );\n}\n\nexport default SeatMapPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}